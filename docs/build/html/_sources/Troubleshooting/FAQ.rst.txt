Frequently Asked Questions
==========================

How do I find the version of Omnia being used?
                                                
If ``control_plane.yml`` has run, a version file is created here: ``/opt/omnia/omnia_version``.

What are the mapping files required when configuring in a LOM setup?

+-------------------------+----------------------------------------------------------------------------------+--------------------------------------+----------------------------------+------------------------------------------------------+
| File name               | Purpose                                                                          | Associated Variable  (base_vars.yml) | Format                           | Sample File Path                                     |
+=========================+==================================================================================+======================================+==================================+======================================================+
| Host mapping            | Mapping file listing all devices (barring iDRAC) and provisioned hosts for DHCP  | ``host_mapping_file_path``           | xx:yy:zz:aa:bb,server,172.17.0.5 | omnia/examples/host_mapping_file_os_provisioning.csv |
|                         | configurations                                                                   |                                      |                                  |                                                      |
+-------------------------+----------------------------------------------------------------------------------+--------------------------------------+----------------------------------+------------------------------------------------------+
| Management mapping file | Mapping file listing iDRACs for DHCP                                             | ``mgmt_mapping_file_path``           | xx:yy:zz:aa:bb,172.17.0.5        | omnia/examples/mapping_device_file.csv               |
|                         | configurations                                                                   |                                      |                                  |                                                      |
+-------------------------+----------------------------------------------------------------------------------+--------------------------------------+----------------------------------+------------------------------------------------------+

Are hosts automatically cleaned up from the AWX UI when re-deploying the cluster?
                                                                                -
No. Before re-deploying the cluster, users have to manually delete all hosts from the awx UI.

How to enable DHCP routing on Compute Nodes:

To enable routing, update the ``primary_dns`` and ``secondary_dns`` in ``base_vars`` with the appropriate IPs (hostnames are currently not supported). For compute nodes that are not directly connected to the internet (ie only host network is configured), this configuration allows for internet connectivity.

How to clear existing DHCP leases after a management NIC IP change:


If ``device_config_support`` is set to TRUE,

1. Reboot the ethernet TOR (Top of the Rack) switches in your environment.

2. If the leases aren't cleared, reboot the devices that have not registered the new IP.

If ``device_config_support`` is set to FALSE, no reboots are required.

What to do if the LC is not ready:


* Verify that the LC is in a ready state for all servers: ``racadm getremoteservicesstatus``

* Launch iDRAC template.

Is Disabling 2FA supported by Omnia?

* Disabling 2FA is not supported by Omnia and must be manually disabled.

Is provisioning servers using BOSS controller supported by Omnia?

Provisioning server using BOSS controller is now supported by Omnia 1.2.1.

What steps have to be taken to re-run control_plane.yml after a Kubernetes reset?


1. Delete the folder: ``/var/nfs_awx``

2. Delete the file:  ``/<project name>/control_plane/roles/webui_awx/files/.tower_cli.cfg``

Once complete, it's safe to re-run control_plane.yml.

Can Cobbler deploy both Rocky and CentOS at the same time?

No. During Cobbler based deployment, only one OS is supported at a time. If the user would like to deploy both, please deploy one first, **unmount ``/mnt/iso``** and then re-run cobbler for the second OS.

How many active NICs are configured by ``idrac.yml``?

Upto 4 active NICs can be configured by ``idrac.yml``. Past the first 4 NICs, all NICs will be ignored.

